[实验一 IP协议分析	](#_Toc467076699)

[实验二 IP地址分析	5](#_Toc467076700)

[实验三 直连路由与静态路由	5](#_Toc467076700)

[实验四 运输层端口观察实验	5](#_Toc467076700)

[实验五 udp协议与tcp协议的对比分析	5](#_Toc467076700)



**PDU** 协议数据单元



### IP协议 

1 背景知识 
（1）什么是IP协议 
IP是英文Internet Protocol（网际互连协议）的缩写，是TCP/IP体系中的网络层协议，目前常用的版本是IPv4。设计IP协议的目的是提高网络的可扩展性：一是解决互联网问题，实现大规模、异构网络的互联互通；二是分割顶层网络应用和底层网络技术之间的耦合关系，以利于两者的独立发展。根据端到端的设计原则，IP协议只为主机提供一种无连接、不可靠的、尽力而为的数据报传输服务。为了能适应异构网络，IP强调适应性、简洁和可操作性，并在可靠性做了一定的牺牲。IP不保证分组的交付时限和可靠性，所传送分组有可能出现丢失、重复、延迟或乱序等问题。IP协议主要包含三方面内容：IP编址方案、分组封装格式以及分组转发规则。 
（2） IP分组的转发规则 
路由器仅根据网络地址进行转发。当IP数据包经由路由器转发时，如果目标网络与本路由器直接相连，则直接将数据包交付给目标主机，这称为直接交付；否则，路由器通过路由表查找路由信息，并将数据包转交给指明的下一跳路由器，这称为间接交付。路由器在间接交付中，若路由表中有到达目标网络的路由，则把数据报传送给路由表指明的下一跳路由器；如果没有路由，但路由表中有一个默认路由，则把数据报传送给指明的默认路由器；如果两者都没有，则丢弃数据包并报告错误。 
（3）什么是IP分片 
一个IP包从源主机传输到目的主机可能需要经过多个不同的网络。由于各种物理网络的链路层都有一个最大传输单元MTU的限制，例如，以太网的MTU是1500；因此，当路由器在转发IP包时，如果数据报的大小超过了出口链路的最大传输单元时，则会将该IP分组分解成很多足够小的片段，以便能够在目标链路上进行传输。这些IP分片重新封装一个IP包独立传输，并在到达目的主机时才会被重组起来。 

2． 实验目的 

(1) 熟悉IP报文格式以及各字段的含义。 
(2) 掌握IP地址的分配方法。 
(3) 理解路由器转发IP数据报的流程。 

3．实验步骤 

任务一：观察路由表 
步骤1：观察Router0的路由表 
步骤2：观察Router1的路由表 
步骤3：观察Router2的路由表 

任务二：观察数据包的封装格式以及TTL字段的变化 
步骤1：初始化所有设备的ARP表信息 
步骤2：观察IP数据报的转发 

任务三：观察路由器转发IP数据报的方式 
步骤 1: 初始化并观察各路由器的路由表 
步骤 2: 观察PC0到 PC2的往返过程 
步骤 3: 观察PC2到 PC1的往返过程 

任务四： 观察IP分片原理 
步骤1：产生需要分片的数据报 
步骤2：观察IP数据报的分片情况 

4． 思考题 

（1）一个IP分组经路由器转发后，有哪些字段会发生变化？ 
（2）任务二的步骤2中，为什么数据单元的源MAC地址和目的MAC地址在转发时会发生变化？ 
（3）路由器如何处理无法继续转发数据包？ 
（4）任务四 为什么将Size值改为 1500就可以产生分片？ 
（5）为什么任务四中的两个分片的长度分别为1500和48。 





### IP地址简介 

（1） 什么是IP地址 
我们把整个因特网看成为一个单一的、虚拟的网络，则IP地址就是给每个连接在Internet上的主机或路由器分配一个唯一的 32位的标识符。为了便于记忆，我们常用点分制表示，如192.168.1.1。IP地址由Internet名字与号码指派公司ICANN统一进行管理和分配。目前，IP地址的编址方法主要有三种：分类的IP地址、可划分子网的IP地址、无分类编址方法CIDR。 
一个IP地址一般是由网络号和主机号两级组成。路由器仅根据目的地址中网络号来转发分组，而不考虑主机号，这样就可以大幅度缩小路由表，提高查表速度。因此，在同一个网络上的主机或路由器的IP 地址的网络号必须是一致。此外，ISP在分配IP地址时只分配网络号，而剩下的主机号则由单位内部自行分配，从而方便了IP地址的管理。 

（2）网关 
网关实质上就是一个网络通往其他网络的关口，也就是连接到本地网络的路由器的接口。当主机需要和外网通信时就必须配置默认网关地址，即默认的出口IP地址。如果主机发送的数据包的目的网络与本主机的网络地址不同，则需要将该数据包转发给默认网关地址指向的路由器，由该路由器负责将数据包转发到其他网络去。网关接口应具有与本地网络相同的网络地址。 

（3）CIDR地址块 
为了进一步提高IP地址的分配效率，Internet引入一种无分类域间路由选择CIDR （Classless Inter-Domain Routing）。CIDR采用可变长掩码，消除了传统的A类、B类和C类地址以及划分子网的概念。它使用各种长度的“网络前缀”来代替分类地址中的网络号和子网号。我们可以根据每个网络主机的具体数量来确定该网络的前缀和主机位，主机数量越大的网络使用更多的主机位，因此更加有效地分配IPv4的地址空间。CIDR把网络前缀都相同的连续的 IP 地址组成“CIDR 地址块”。如“129.14.32.0/20”地址块共有212个地址，其中，最小地址为129.14.32.0，最大地址为129.14.47.255。 

2 实验目的 
（1）掌握分类的IP编址方法。 
（2）掌握可划分子网的IP编址方法 
（3）掌握CIDR的IP编址方法和路由聚合功能 

3 实验步骤 
（1） 任务一：练习主机和路由器的IP地址配置 
步骤1：选择适当的IP 地址、掩码和网关 
步骤2：为主机分配所选的信息 
步骤3：为Router0的Se0/0/0接口分配所选的信息 
步骤4：测试连通性 

（2）任务二：练习划分子网 
步骤1：为Route1接口选择适当的 IP地址和子网掩码 
步骤 2：为路由器分配所选的信息 
步骤3：测试连通性 

（3）任务二：练习CIDR地址规划 
步骤 1：为Route1接口选择适当的 IP地址和掩码。 
步骤 2：为路由器分配所选的信息。 
步骤 3：在路由器上进行路由聚合 
步骤 4：测试连通性 

4.思考题 

（1）与分类的IP编址方法相比，CIDR编址方案具有什么优点？ 
（2）在任务一中，分配给PC0的IP地址一定要使用192.168.1.0网段吗？为什么？ 
（3）在任务二中，选择不同前缀长度的依据是什么？ 
（4）在任务二中，如果Route0不进行路由聚合，则要需要配置哪些静态路由信息，才能确保PC0能访问PC1和PC2。 
（5） 路由器的不同接口能否使用相同的网络号？ 





### 直连路由与静态路由

1.背景知识 

（1）路由 
路由是指路由器根据数据包的目的地址，将其从一个接口转发到另一个接口的过程。在互联网中，路由器是依据路由表来转发IP分组。路由器的路由表信息有三种来源：直连路由、静态路由和动态路由。其中，动态路由是路由器通过运行路由协议，自动获得的路由信息。在因特网中，路由器主要是依靠路由协议来建立路由表。 
（2）直连路由 
直连路由是由物理接口的链路层协议自动发现的。当某个接口处于活动状态时，路由器会自动学习到该接口所连接的网络的地址信息，并将该路由信息添加到路由表中去。但直连路由无法获取与路由器不直接相连的路由信息。 
（3）静态路由 
静态路由是指管理员人工配置路由表，它只适用于简单的网络环境。要求管理员了解整个网络的拓扑信息和链路信息，并且当网络拓扑结构和链路状态发生变化时，所有路由器的路由表都需要人工进行调整修改。因此，大型或复杂网络通常不建议采用静态路由。静态路由的优点是不消耗路由器的计算和带宽资源，并且安全性高。 
（4）默认路由 
默认路由是一种特殊的静态路由，是指当路由表中找不到匹配的出口表项时，路由器采取的路由选择。默认路由可减少路由表所占用的空间和搜索路由表所用的时间。在路由表中只能有一条默认路由表目，通常发往本自治系统外的网络的数据报是通过默认路由指向。 

2. 实验目的 

（1）理解直连路由 
（2）理解静态路由，并掌握静态路由配置 

3. 实验步骤 

（1）任务一：观察直连路由 
  步骤1：观察Router1的路由表。 
  步骤 2：步骤2：观察直连路由的更新。 
（2）任务二：静态配置路由 
  步骤1：为路由器设计正确的静态路由 
  步骤2：为每个路由器配置静态路由 
  步骤3：检查路由配置是否正确 
（3）任务三：配置默认路由 
   步骤1：删除router1的静态路由 
    步骤2：为router1添加一条默认路由 
（4）任务四：观察路由环路问题 
 步骤1：在网络中配置出一条路由环路 
 步骤2：观察数据包在环路中的转发情况 

4. 思考题 

（1） 如果路由器转发的数据包的目的网络不在路由表中，则会如何处理？ 
（2）在任务二中的步骤2中，环路造成的循环转发过程会不会停止？原因是什么？ 
（3）默认路由有何作用？ 



### 运输层端口观察实验

进程通信与端口

实现进程到进程间的通信是运输层的最基本功能。由于通信的真正主体是进程，因此严格讲，所谓通信是指主机上的进程到另一个主机上的进程间交互，即“端到端的通信”。IP网络实现将分组从源主机发送到目的主机，但计算机引入多道程序设计后，主机就类似一个单位的收发室，或者一个宾馆的电话总机，需要进一步标识接收的主体。即网络需要进一步指明是哪个应用进程来处理接收到的数据。
TCP/IP协议解决这个问题的方法就是统一使用协议端口号，简称为端口（(port）。端口号是一个16比特的标识符，取值范围是0~65535。端口号只具有本地意义，每个主机上的TCP和UDP协议各有一套。如果把IP地址比做宾馆的总机号码，那么端口号就是各房间的分机号，只有总机号加分机号才能拨通房间的电话。因此，Internet使用套接字来标识网络中的某个进程，套接字=主机IP地址+端口号。
端口类别

IANA（互联网数字分配机构）将端口分为三种类别：熟知端口、注册端口和客户端口。熟知端口也就是众所周知的端口，其范围为 0~1023，它们一般固定分配给一些标准的Internet服务，如HTTP→80、SMTP→25、DNS→53，RIP→520。登记端口号范围为1024~49151，它是为没有熟知端口号的应用程序使用的。使用这个范围的端口号必须在 IANA 注册，以防止冲突。客户端口号为49152~65535，一般用于源端口。当服务器进程收到客户进程的报文时，就知道了客户进程所使用的动态端口号。通信结束后，这个端口号可供其他客户进程以后使用，因此也称动态端口。
实验目的

① 理解端到端通信和端口的含义
② 熟悉端口的分类，并理解分类的意义
实验步骤

 任务一：观察UDP端口

  步骤1：捕获DNS事件

 步骤2：查看并分析UDP用户数据报中的端口号

本步骤需注意观察并分析以下几项内容：
 DNS请求包和应答包的源、目的端口号是否发生变化；
  判断PC和Server的客户端/服务器角色，分析判断依据。
 步骤3：分析端口号的变化规律

再次单击PC浏览器窗口的Go按钮，刷新网页。此时在Simulation Panel中可以看到新一轮的域名解析过程，新的UDP报文事件也会被添加到Event List中。观察新的DNS查询请求报文和应答报文的源目端口，分析这些端口是否发生变化。可以多次刷新网页，以便观察请求报文和应答中端口的变化规律。
特别注意：由于任务二的需要，请保留原先的捕获结果（不要点击 Reset Simulation按钮），同时也不要关闭PC的浏览器窗口。
l       任务二：观察TCP端口

²        步骤1：捕获HTTP事件

²        步骤2：查看并分析TCP报文中的端口号

²        步骤3：分析TCP端口的变化规律

l       任务三：分析运输层端口号

²        步骤1：分析运输层端口号与应用进程之间的关系

对比任务一中DNS服务器端的端口号与任务二中服务器端的端口号是否相同，并分析其原因。
²        步骤2：分析运输层动态端口号的分配规律

重新捕获HTTP事件以分析TCP协议的端口号变化情况。具体操作方法参考任务二中的步骤2。
该步骤重点观察HTTP客户端的端口号，并与任务二中观察到的HTTP客户端的端口号进行对比，分析归纳动态端口号的分配规律。
完成后单击 Reset Simulation（重置模拟）按钮，将原有的事件清空。
思考：

① 运输层是如何区分不同的应用层进程的？
② 重新刷新网页时，UDP请求报文的源端口和目的端口是否发生变化，分析其原因。



###  UDP与TCP的对比分析

TCP协议

传输控制协议TCP（Transmission Control Protocol）是一种面向连接的、基于字节流的传输层协议，它是为了在不可靠的互联网上提供可靠的端到端通信而专门设计的一种传输协议。RFC793是最早的TCP协议文档，之后又有几十种的改进RFC文档。TCP是一种比较完善的传输层协议，它除了实现端到端的通信外，还提供报文分段以及差错控制、接收流量控制和网络流量控制等可靠性服务。
TCP协议采用段的形式交换数据，并且对发送的每个字节进行编号。TCP实体使用的基本传输协议是具有动态窗口大小的滑动窗口协议。当发送端发送一个数据段后，会启动一个计时器；接收端正确接收后返回一个携带确认号和剩余窗口大小的确认段（可以由反向数据段捎带），其中，剩余窗口大小用于控制发送方的发送速度，以免造成接收缓存溢出；如果发送端的计时器在确认段到达之前发生超时，发送端则重发原数据段。
由于TCP提供可靠的传输服务，并且考虑网络流控，因此被因特网上的大多数应用协议所采用，例如HTTP、Telnet、FTP、SMTP等。
UDP协议

UDP是一个简单的、无连接的、面向数据报的运输层协议。UDP没有报文分组功能，它只在IP的数据报服务基础上增加端口和差错检测功能。由于UDP采用无连接通信方式，无法保证传输的可靠性，但这也大大简化了传输协议，因此传输效率高、时延小。其报文段首部也很简单，只有8字节。
由于UDP具有快捷简便、支持组播/广播等特点，因此被不少局域网内的应用协议所采用的，如DNS、NFS、SNMP、TFTP、RIP等。此外，中国宽带有线网上开展的视频和股票等业务，也几乎全都采用UDP，这是考虑UDP的单向性和广播特性。
实验目的

① 了解UDP与TCP的主要特点及其应用。
② 理解UDP的无连接通信方式与TCP的面向连接通信方式。
③ 熟悉TCP报文段和UDP报文的数据封装格式。
实验步骤

l         任务一：观察UDP无连接的工作模式

²        步骤1：捕获UDP传输

²        步骤2：分析UDP无连接的工作过程

本步骤仅查看第4层中UDP报文段的内容。注意观察并分析以下几项内容：
l         运输层的UDP发送DNS的请求之前是否有先建立连接；
l         记录UDP的用户数据报首部中的LENGTH字段的值，分析该报文的首部及数据部分的长度。
²        步骤3：分析UDP报文格式

l         任务二：观察TCP面向连接的工作模式

²        步骤1：捕获TCP事件

²        步骤2：分析TCP面向连接的工作过程

本步骤仅查看第4层中TCP报文段的内容。注意观察并分析以下几项内容：
l         在捕获到的第一个HTTP事件之前及最后一个HTTP事件之后是否有TCP事件；
l         第一个以及最后一个HTTP事件对应的TCP报文中的sequence number（序号）、ACK number（确认号）的值以及它们与data length（数据长度）的关系；
l         并查看TCP报文首部中固定部分的长度。
分析完成后单击Reset Simulation（重置模拟）按钮，将原有的事件全部清空。

思考：

① TCP报文首部中的序号和确认号有什么作用？
② 无连接的UDP和面向连接的TCP各有什么优缺点？

 



[Background] 

Text classification is a crucial task in natural language processing with diverse real-world applications. Naive Bayes is a popular algorithm for this task, but its effectiveness in classifying news articles needs to be evaluated. 

[Purposes] 

The main objective of this study is to assess the performance of the Naive Bayes algorithm in text classification tasks. The study aims to compare its accuracy and computational efficiency with other state-of-the-art classifiers using a large dataset of news articles. 

[Methods] 

To achieve the research objectives, the Naive Bayes algorithm is implemented and applied to a dataset comprising news articles. The algorithm’s performance is then compared with other classifiers using various metrics such as accuracy and computational efficiency. 

[Results] 

Experimental results indicate that the Naive Bayes algorithm achieves competitive accuracy and computational efficiency in text classification tasks. These findings highlight its suitability for large-scale text classification in real-world scenarios. However, the algorithm’s limitations, such as the assumption of feature independence and challenges with rare or unseen words, should be considered. 

[Conclusion] 

This study contributes to the understanding of the Naive Bayes algorithm’s application in text classification. It emphasizes the algorithm’s competitive performance while acknowledging its limitations. Moreover, potential areas for future research, such as incorporating semantic features and exploring ensemble methods, are identified. The findings provide valuable insights for researchers and practitioners working on improving text classification techniques.